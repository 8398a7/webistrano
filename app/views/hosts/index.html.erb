<% content_for :breadcrumb do %>
  <%= breadcrumb_box do %>
    Hosts
  <% end %>
<% end %>

<% content_for :page_title do %>
  <% @page_title = "Hosts" %>
  <h2>Hosts</h2>
<% end %>

<fieldset class="fieldset">
  <legend> <%= pluralize Host.count, 'Host' %> listed</legend>

  <table class="sortable">
    <tr>
      <th width="34%">Name</th>
      <th width="33%">#Stages</th>
      <th width="33%">#Roles</th>
    </tr>
    <% @hosts.each do |host| %>
      <tr class="<%= cycle :even, :odd  %>">
        <td><%= link_to host.name, host_path(host) %></td>
        <td><%= host.stages.count %></td>
        <td><%= host.roles.count %></td>
        <% if current_user.admin? %>
          <td><%= link_to 'Edit', edit_host_path(host) %></td>
          <td><%= link_to 'Delete', host_path(host), :confirm => 'Are you sure?', :method => :delete %></td>
        <% end %>
      </tr>
    <% end %>
  </table>

  <% if current_user.admin? %>
    <br />
    <%= link_to 'New host', new_host_path, :class => 'arrow_link' %>
  <% end %>
</fieldset>

